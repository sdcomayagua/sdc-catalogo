<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Soluciones Digitales Comayagua | Cat√°logo</title>

  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëæ</text></svg>">

  <meta property="og:title" content="Soluciones Digitales Comayagua | Cat√°logo Gamer 2026" />
  <meta property="og:description" content="Cat√°logo oficial de accesorios Gamer, PC y Streaming. Env√≠os a toda Honduras. ¬°Equ√≠pate con lo mejor!" />
  <meta property="og:image" content="https://raw.githubusercontent.com/sdcomayagua/sdc-catalogo/94d9f2b52faa08cccf5bfff9c50f2b8458ea4b04/PORTADA%20-%20SDC%20-%202026.png" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0b1120" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- 3 pesos para cargar m√°s r√°pido -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    :root{
      --bg:#0b1120;--card-bg:#151e32;--primary:#38bdf8;--accent:#2dd4bf;--text:#f8fafc;--text-muted:#94a3b8;
      --border:#1e293b;--shadow-card:0 4px 6px -1px rgba(0,0,0,.5);--chip-bg:#1e293b;--chip-text:#cbd5e1;
      --bg-image:radial-gradient(at top,#1e293b 0%,#0b1120 100%);--danger:#ef4444;
      --promo-color:#ff6b00;--promo-glow:rgba(255,107,0,.55);--promo-bg:rgba(255,107,0,.14);
    }
    [data-theme="light"]{
      --bg:#f8fafc;--card-bg:#ffffff;--primary:#0f172a;--accent:#15803d;--text:#1a1a1a;--text-muted:#64748b;
      --border:#e2e8f0;--shadow-card:0 4px 15px rgba(0,0,0,.05);--chip-bg:#ffffff;--chip-text:#4b5563;--bg-image:none;
      --promo-color:#ea580c;--promo-glow:rgba(234,88,12,.18);--promo-bg:#fff7ed;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{
      margin:0;font-family:'Outfit',sans-serif;background-color:var(--bg);background-image:var(--bg-image);background-attachment:fixed;
      color:var(--text);padding-bottom:80px;transition:background .3s,color .3s;-webkit-user-select:none;user-select:none
    }
    header{
      position:sticky;top:0;z-index:100;background:var(--card-bg);border-bottom:1px solid var(--border);
      padding:12px 16px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 4px 20px rgba(0,0,0,.1)
    }
    .brand{display:flex;align-items:center;gap:10px;cursor:pointer}
    .brand img{height:40px;border-radius:6px;pointer-events:none}
    .brand h1{margin:0;font-size:16px;font-weight:900;color:var(--text);text-transform:uppercase;letter-spacing:1px}
    .brand h1 span{color:var(--primary)}
    .icon-btn{
      background:transparent;border:1px solid var(--border);color:var(--text);width:35px;height:35px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;cursor:pointer
    }

    .hero-section{padding:36px 20px 12px;text-align:center;margin-bottom:6px}
    .hero-title{font-size:28px;font-weight:900;margin:0 0 10px;line-height:1.1;color:var(--text);text-transform:uppercase}
    .hero-highlight{
      background:linear-gradient(-45deg,#38bdf8,#818cf8,#2dd4bf,#38bdf8);background-size:300%;
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:textShine 6s ease-in-out infinite
    }
    [data-theme="light"] .hero-highlight{
      background:linear-gradient(-45deg,#0284c7,#4f46e5,#059669,#0284c7);background-size:300%;
      -webkit-background-clip:text;-webkit-text-fill-color:transparent
    }
    @keyframes textShine{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .hero-desc{font-size:14px;color:var(--text-muted);margin:0 auto;line-height:1.5;max-width:92%;font-weight:400}

    .search-container{padding:0 16px;max-width:800px;margin:18px auto 8px}
    .search-box{position:relative;display:flex;align-items:center}
    .search-box i{position:absolute;left:14px;color:var(--text-muted)}
    .search-box input{
      width:100%;padding:14px 16px 14px 45px;border-radius:16px;border:1px solid var(--border);
      background:var(--card-bg);color:var(--text);font-size:15px;outline:none;font-weight:700;
      box-shadow:0 4px 10px rgba(0,0,0,.05);user-select:text;-webkit-user-select:text
    }
    .search-box input:focus{border-color:var(--primary)}

    .trust-grid{
      display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:0 16px;max-width:800px;margin:18px auto 22px
    }
    .trust-item{
      display:flex;align-items:center;justify-content:center;gap:8px;font-size:11px;font-weight:700;color:var(--text-muted);
      background:var(--card-bg);padding:10px;border-radius:12px;border:1px solid var(--border);box-shadow:0 2px 5px rgba(0,0,0,.02)
    }
    .trust-item i{color:var(--accent);font-size:14px}

    .filters-wrapper{
      position:sticky;top:60px;z-index:90;background:var(--bg);padding:14px 0 10px;border-bottom:1px solid transparent;transition:.25s
    }
    .filters-wrapper.scrolled{background:var(--card-bg);border-bottom:1px solid var(--border);box-shadow:0 4px 10px rgba(0,0,0,.1)}
    .category-bar,.sub-bar{display:flex;gap:10px;overflow-x:auto;padding:0 16px 8px;scrollbar-width:none}
    .chip{
      padding:8px 18px;border-radius:99px;background:var(--chip-bg);border:1px solid var(--border);color:var(--chip-text);
      font-size:13px;font-weight:800;white-space:nowrap;cursor:pointer;display:flex;align-items:center;gap:6px;text-transform:uppercase;
      transition:all .2s
    }
    .chip.active{background:var(--primary);color:#fff;border-color:var(--primary);box-shadow:0 4px 12px rgba(0,0,0,.2);transform:translateY(-1px)}
    [data-theme="dark"] .chip.active{color:#000;font-weight:900}
    .chip.promo-active{
      background:linear-gradient(135deg,#f59e0b,#d97706)!important;border-color:#f59e0b!important;color:#fff!important;
      box-shadow:0 0 18px rgba(245,158,11,.65)!important
    }
    .sub-bar .chip{padding:6px 14px;font-size:11px;border-radius:10px;background:transparent;border:1px solid var(--border)}
    .sub-bar .chip.active{background:var(--text);border-color:var(--text);color:var(--bg)}

    .status-row{
      display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center;
      padding:10px 16px 14px; /* ‚úÖ m√°s aire arriba/abajo */
      max-width:1000px;margin:0 auto
    }
    .status-pill{
      background:rgba(255,255,255,.04);border:1px solid var(--border);padding:8px 12px;border-radius:999px;
      font-size:12px;font-weight:900;color:var(--text-muted);text-transform:uppercase;letter-spacing:.4px
    }
    [data-theme="light"] .status-pill{background:#fff;border-color:#e2e8f0}
    .status-pill strong{color:var(--text)}

    .grid{
      display:grid;grid-template-columns:1fr;gap:16px;padding:10px 16px;max-width:1200px;margin:0 auto;min-height:200px
    }
    @media(min-width:768px){.grid{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:24px}}

    #loader{display:flex;flex-direction:column;align-items:center;justify-content:center;height:280px;color:var(--text)}
    .spinner{width:40px;height:40px;border:4px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin .8s linear infinite;margin-bottom:18px}
    @keyframes spin{to{transform:rotate(360deg)}}

    .welcome-state{grid-column:1/-1;text-align:center;padding:38px 20px;color:var(--text-muted)}
    .welcome-icon{font-size:50px;margin-bottom:18px;color:var(--primary);opacity:.8}
    .welcome-title{font-size:18px;font-weight:900;color:var(--text);margin-bottom:10px}
    .welcome-text{font-size:13px;max-width:320px;margin:0 auto;line-height:1.5}

    .card{
      background:var(--card-bg);border:1px solid var(--border);border-radius:16px;overflow:hidden;display:flex;flex-direction:column;
      position:relative;box-shadow:var(--shadow-card);transition:.2s;animation:fadeIn .25s ease-out forwards
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
    .card.promo-mode{border:2px solid var(--promo-color)!important;box-shadow:0 0 22px var(--promo-glow)!important}

    /* ‚úÖ imagen en div hijo para que AGOTADO no se ponga gris */
    .card-img-container{position:relative;width:100%;aspect-ratio:1/1;background:#fff;border-bottom:1px solid var(--border);overflow:hidden}
    .card-img{
      position:absolute;inset:0;background-size:contain;background-position:center;background-repeat:no-repeat
    }
    .card.agotado .card-img{filter:grayscale(100%);opacity:.55}

    .ribbon{
      position:absolute;top:16px;left:-34px;width:110px;background:var(--danger);color:#fff;font-size:10px;font-weight:900;
      padding:5px 0;transform:rotate(-45deg);text-align:center;z-index:10;box-shadow:0 2px 8px rgba(0,0,0,.35)
    }
    .ribbon-promo{
      position:absolute;top:0;right:0;background:linear-gradient(135deg,#f59e0b,#ea580c);color:#fff;font-size:10px;font-weight:900;
      padding:6px 12px;border-bottom-left-radius:12px;z-index:10;box-shadow:-2px 2px 10px rgba(245,158,11,.5);letter-spacing:1px
    }

    .video-badge{
      position:absolute;bottom:8px;right:8px;z-index:12;display:flex;align-items:center;gap:5px;padding:5px 12px;border-radius:20px;
      font-size:10px;font-weight:900;color:#fff;text-decoration:none;backdrop-filter:blur(4px);box-shadow:0 2px 8px rgba(0,0,0,.3);
      transition:.2s;text-transform:uppercase
    }
    .video-badge:hover{transform:scale(1.05)}
    .video-badge.tiktok{background:rgba(0,0,0,.9);border:1px solid rgba(255,255,255,.2)}
    .video-badge.youtube{background:rgba(220,38,38,.95);border:1px solid rgba(255,255,255,.2)}

    .card-body{padding:16px;display:flex;flex-direction:column;gap:8px;flex-grow:1}
    .card h3{
      margin:0;font-size:16px;font-weight:900;line-height:1.3;text-transform:uppercase;letter-spacing:.5px;overflow:hidden;
      display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;height:42px;color:var(--text)
    }
    .desc{
      font-size:13.5px;font-weight:500;color:var(--text);opacity:.92;margin:0;line-height:1.6;white-space:pre-line;padding-left:4px
    }
    .btn-gallery{
      display:flex;align-items:center;justify-content:center;gap:6px;width:100%;padding:8px;margin-top:6px;background:transparent;
      border:1px dashed var(--border);border-radius:10px;color:var(--text-muted);font-size:11px;font-weight:900;text-decoration:none;
      text-transform:uppercase;letter-spacing:.5px;transition:.2s
    }
    .btn-gallery:hover{background:var(--card-bg);border-color:var(--primary);color:var(--primary)}

    .price-bar{
      display:flex;align-items:center;justify-content:center;gap:8px;background:rgba(255,255,255,.03);border:1px solid var(--border);
      border-radius:10px;padding:10px;margin-top:10px
    }
    [data-theme="light"] .price-bar{background:#f0fdf4;border-color:#dcfce7}
    .price-stack{display:flex;flex-direction:column;align-items:center;text-align:center;line-height:1.15}
    .old-price-row{color:var(--text-muted);margin-bottom:4px;display:flex;gap:6px;align-items:center;justify-content:center;white-space:nowrap}
    .old-val{text-decoration:line-through;opacity:.7;font-size:12px}
    .current-price-row{font-size:22px;font-weight:900;color:var(--accent);white-space:nowrap}
    .price-icon{color:var(--accent);font-size:16px;opacity:.85}

    .btn-ws{
      background:var(--primary);color:#fff;border:none;padding:12px;border-radius:10px;font-weight:900;font-size:13px;cursor:pointer;
      text-decoration:none;display:flex;align-items:center;justify-content:center;gap:6px;text-transform:uppercase;transition:.2s
    }
    [data-theme="dark"] .btn-ws{color:#000}

    /* PROMO selector */
    .promo-box{
      margin-top:10px;border:1px solid rgba(255,107,0,.35);background:var(--promo-bg);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:10px
    }
    .promo-top{
      background:rgba(255,255,255,.06);border:1px solid rgba(255,107,0,.35);border-radius:12px;padding:10px;display:flex;
      align-items:center;justify-content:center;flex-direction:column;gap:6px
    }
    .promo-total{font-size:26px;font-weight:900;color:var(--promo-color);display:flex;gap:10px;align-items:center}
    .promo-sub{font-size:12px;font-weight:900;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}
    .qty-row{display:flex;align-items:center;justify-content:center;gap:10px}
    .qty-btn{
      width:44px;height:44px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);
      font-size:18px;font-weight:900;display:flex;align-items:center;justify-content:center;cursor:pointer
    }
    .qty-btn.disabled{opacity:.45;cursor:not-allowed}
    .qty-pill{
      min-width:120px;text-align:center;padding:10px 12px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.05);font-weight:900;text-transform:uppercase
    }
    .tier-grid{
      display:flex;flex-wrap:wrap;gap:8px;justify-content:center
    }
    .tier{
      padding:8px 10px;border-radius:999px;border:1px solid rgba(255,107,0,.35);background:rgba(255,255,255,.06);
      font-size:12px;font-weight:900;cursor:pointer;display:flex;gap:6px;align-items:center;text-transform:uppercase
    }
    .tier.active{background:rgba(255,107,0,.22);border-color:var(--promo-color);box-shadow:0 0 0 2px rgba(255,107,0,.18) inset}
    .tier.disabled{opacity:.35;cursor:not-allowed;position:relative}
    .tier.disabled::after{content:"‚úñ";position:absolute;right:8px;top:-6px;font-size:12px;color:var(--danger);font-weight:900}

    .hint{font-size:11px;font-weight:900;color:var(--text-muted);text-align:center;text-transform:uppercase;letter-spacing:.4px}

    /* Toast */
    .toast{
      position:fixed;left:50%;transform:translateX(-50%);bottom:86px;z-index:999;
      background:rgba(0,0,0,.85);color:#fff;padding:10px 12px;border-radius:12px;font-weight:900;font-size:12px;opacity:0;pointer-events:none;
      transition:.2s
    }
    [data-theme="light"] .toast{background:rgba(15,23,42,.92)}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}

    /* TESTIMONIOS */
    .testimonials-section{padding:28px 16px;margin-top:18px;background:rgba(255,255,255,.02);border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
    .sec-title{text-align:center;font-size:18px;font-weight:900;margin:0 0 18px;color:var(--text);text-transform:uppercase}
    .testimonials-track{display:flex;gap:15px;overflow-x:auto;padding-bottom:10px;scrollbar-width:none}
    .t-card{min-width:260px;max-width:260px;background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:15px;display:flex;flex-direction:column;gap:6px}
    .t-header{display:flex;align-items:center;gap:10px}
    .t-avatar{width:36px;height:36px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:14px}
    [data-theme="dark"] .t-avatar{color:#000}
    .t-info h4{margin:0;font-size:13px;color:var(--text)}
    .t-info span{font-size:10px;color:var(--accent);font-weight:800;text-transform:uppercase}
    .t-stars{color:#fbbf24;font-size:12px;margin:0} /* ‚úÖ sin espacio extra */
    .t-text{margin:6px 0 0;font-size:12px;color:var(--text-muted);line-height:1.45;font-style:italic;text-align:justify} /* ‚úÖ justificado */

    .location-section{padding:20px 16px;margin-top:10px;text-align:center}
    .map-shell{width:100%;height:250px;border:2px solid var(--border);border-radius:16px;margin-bottom:12px;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .map-btn{
      background:var(--primary);border:none;color:#fff;padding:12px 16px;border-radius:12px;font-weight:900;text-transform:uppercase;cursor:pointer;
      display:flex;gap:8px;align-items:center;justify-content:center
    }
    [data-theme="dark"] .map-btn{color:#000}

    .location-btns{display:flex;gap:10px;justify-content:center}
    .btn-loc{
      flex:1;padding:12px;border-radius:12px;font-weight:900;font-size:12px;text-decoration:none;display:flex;align-items:center;justify-content:center;gap:8px;
      text-transform:uppercase;transition:.2s
    }
    .btn-google{background:#4285F4;color:#fff;box-shadow:0 4px 10px rgba(66,133,244,.3)}
    .btn-waze{background:#33ccff;color:#fff;box-shadow:0 4px 10px rgba(51,204,255,.3)}

    .faq-section{padding:20px 16px;max-width:800px;margin:0 auto}
    .faq-item{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;margin-bottom:10px;overflow:hidden}
    .faq-question{padding:15px;font-size:14px;font-weight:800;color:var(--text);display:flex;justify-content:space-between;align-items:center;cursor:pointer}
    .faq-answer{padding:0 15px 15px;font-size:13px;color:var(--text-muted);line-height:1.5;display:none;text-align:justify}
    .faq-item.open .faq-answer{display:block}
    .faq-item.open .faq-question i{transform:rotate(180deg)}

    footer{text-align:center;padding:30px 20px;color:var(--text-muted);font-size:12px;margin-top:20px;border-top:1px solid var(--border)}
    .social-bar{display:flex;justify-content:center;gap:15px;margin-bottom:20px}
    .social-btn{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;color:#fff;text-decoration:none;transition:.3s;box-shadow:0 4px 10px rgba(0,0,0,.3)}
    .sb-insta{background:linear-gradient(45deg,#f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)}
    .sb-fb{background:#1877F2}
    .sb-tiktok{background:#000;border:1px solid #333}

    .float-ws{position:fixed;bottom:20px;right:20px;width:55px;height:55px;background:#25D366;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:28px;box-shadow:0 4px 15px rgba(0,0,0,.3);z-index:200;text-decoration:none}
    .highlight{outline:3px solid rgba(56,189,248,.65);box-shadow:0 0 0 6px rgba(56,189,248,.18);transition:.3s}
  </style>
</head>

<body>
  <header>
    <div class="brand" id="goHome">
      <img src="logo.png" alt="SDC" onerror="this.style.display='none'">
      <div>
        <h1>Soluciones <span>Digitales</span></h1>
        <small style="color:var(--text-muted); font-size:10px; letter-spacing:1px; font-weight:800;">COMAYAGUA</small>
      </div>
    </div>
    <div style="display:flex; gap:10px; align-items:center;">
      <div class="icon-btn" id="themeToggle" title="Tema"><i class="fa-solid fa-sun"></i></div>
    </div>
  </header>

  <div class="hero-section">
    <h2 class="hero-title">üéÆ <span class="hero-highlight">Accesorios Gamer</span> & Tecnolog√≠a</h2>
    <p class="hero-desc">En Comayagua. Atenci√≥n directa por WhatsApp.<br>Productos probados y ofertas reales.</p>
  </div>

  <div class="search-container">
    <div class="search-box">
      <i class="fa-solid fa-search"></i>
      <input id="searchInput" type="text" placeholder="Buscar producto (nombre o descripci√≥n)..." />
    </div>
  </div>

  <div class="trust-grid">
    <div class="trust-item"><i class="fa-solid fa-truck-fast"></i> Env√≠os a toda HN</div>
    <div class="trust-item"><i class="fa-solid fa-shield-halved"></i> Compra Segura</div>
    <div class="trust-item"><i class="fa-solid fa-headset"></i> Atenci√≥n Real</div>
    <div class="trust-item"><i class="fa-solid fa-box"></i> Contra Entrega (seg√∫n empresa)</div>
  </div>

  <div class="filters-wrapper" id="filtersWrapper">
    <div class="category-bar" id="categoryBar">
      <div class="chip active">Cargando...</div>
    </div>
    <div class="sub-bar" id="subBar"></div>
  </div>

  <div class="status-row" id="statusRow" style="display:none"></div>

  <div id="loader">
    <div class="spinner"></div>
    <p style="font-weight:900; letter-spacing:1px;">CARGANDO DATOS...</p>
  </div>

  <div class="grid" id="productGrid"></div>

  <!-- TESTIMONIOS -->
  <div class="testimonials-section" id="testimonialsSection" style="display:none">
    <h3 class="sec-title">‚≠ê Lo que dicen los Gamers</h3>
    <div class="testimonials-track" id="testimonialsTrack"></div>
  </div>

  <!-- UBICACI√ìN -->
  <div class="location-section">
    <h3 class="sec-title">üìç Base de Operaciones</h3>
    <div class="map-shell" id="mapShell">
      <button class="map-btn" id="loadMapBtn"><i class="fa-solid fa-map"></i> Cargar mapa</button>
    </div>

    <div class="location-btns">
      <a href="https://www.google.com/maps/search/?api=1&query=Inkmortal+Tattoo+Comayagua" target="_blank" class="btn-loc btn-google">
        <i class="fa-solid fa-map-location-dot"></i> Google Maps
      </a>
      <a href="https://waze.com/ul?ll=14.454458,-87.6278246&navigate=yes" target="_blank" class="btn-loc btn-waze">
        <i class="fa-brands fa-waze"></i> Waze
      </a>
    </div>
  </div>

  <!-- FAQ (3) -->
  <div class="faq-section">
    <h3 class="sec-title" style="margin-top:10px;">‚ùì Preguntas Frecuentes</h3>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">¬øHacen env√≠os a toda Honduras? <i class="fa-solid fa-chevron-down"></i></div>
      <div class="faq-answer">
        ¬°Claro! üöö Enviamos a todo Honduras con empresas como <b>C807, Forza y Cargo Expreso</b>. Tambi√©n pod√©s retirar o coordinar entrega en Comayagua.
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">¬øQu√© m√©todos de pago aceptan? <i class="fa-solid fa-chevron-down"></i></div>
      <div class="faq-answer">
        Aceptamos <b>efectivo</b> y <b>transferencia</b>. Tambi√©n se puede coordinar <b>contra entrega</b> cuando aplica (el costo lo cobra la empresa al recibir).
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">¬øC√≥mo puedo comprar? <i class="fa-solid fa-chevron-down"></i></div>
      <div class="faq-answer">
        Elige tu producto y toca <b>"PEDIR AHORA üöÄ"</b>. Te llevar√° a WhatsApp con el mensaje listo (cantidad, precio y total si es promo).
      </div>
    </div>
  </div>

  <footer>
    <div class="social-bar">
      <a href="https://www.facebook.com/sdcomayagua/" target="_blank" class="social-btn sb-fb"><i class="fa-brands fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/sdcomayagua/" target="_blank" class="social-btn sb-insta"><i class="fa-brands fa-instagram"></i></a>
      <a href="https://www.tiktok.com/@gamer.comayagua" target="_blank" class="social-btn sb-tiktok"><i class="fa-brands fa-tiktok"></i></a>
    </div>
    <p>¬© 2026 Soluciones Digitales Comayagua<br><span style="font-size:10px; opacity:0.6;">Todos los derechos reservados.</span></p>
  </footer>

  <a class="float-ws" href="https://wa.me/50432429490" target="_blank" aria-label="WhatsApp"><i class="fa-brands fa-whatsapp"></i></a>
  <div class="toast" id="toast"></div>

<script>
/* ================== CONFIG ================== */
const SHEET_ID = "1J-y47gPZuuyQOxaj9OJa4tMzR2IjfQVAzCR1i928dng";
const CONFIG_GID = "1488858707";
const MY_PHONE = "50432429490";
const BACKUP_SHEETS = ["ofertas","gamer","pc","movil","streaming","cobertores","power"]; // productos
const TESTIMONIOS_SHEET = "testimonios";

/* ================== STATE ================== */
let products = [];
let currentCategory = "";
let currentSub = "";
let soloOfertasMode = false;
let pendingPid = "";

/* ================== HELPERS ================== */
function norm(s){
  return (s ?? "").toString().trim().toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g,"");
}
function money(n){
  const x = Number(n || 0);
  return x.toLocaleString("es-HN",{maximumFractionDigits:0});
}
function toast(msg){
  const el = document.getElementById("toast");
  el.textContent = msg;
  el.classList.add("show");
  clearTimeout(window.__t);
  window.__t = setTimeout(()=>el.classList.remove("show"), 1800);
}
function getIconForCategory(cat){
  const name = norm(cat);
  if(name.includes("gamer")) return "üéÆ";
  if(name.includes("pc")) return "üñ•Ô∏è";
  if(name.includes("movil") || name.includes("m√≥vil") || name.includes("cel")) return "üì±";
  if(name.includes("stream")) return "üì∫";
  if(name.includes("cobert")) return "üì¶";
  if(name.includes("power")) return "üîã";
  return "üì¶";
}
function pluralize(unidad, qty){
  const u = norm(unidad);
  if(u === "par") return qty === 1 ? "par" : "pares";
  if(u === "uno") return qty === 1 ? "unidad" : "unidades";
  return qty === 1 ? "unidad" : "unidades";
}

/* ================== URL ================== */
function updateUrl(){
  const url = new URL(window.location);
  if(currentCategory) url.searchParams.set("cat", currentCategory); else url.searchParams.delete("cat");
  if(currentSub) url.searchParams.set("sub", currentSub); else url.searchParams.delete("sub");
  if(soloOfertasMode) url.searchParams.set("offer","1"); else url.searchParams.delete("offer");
  if(pendingPid) url.searchParams.set("pid", pendingPid); else url.searchParams.delete("pid");
  window.history.replaceState({}, "", url);
}
function loadFromUrl(){
  const params = new URLSearchParams(window.location.search);
  const cat = params.get("cat");
  const sub = params.get("sub");
  const offer = params.get("offer");
  const pid = params.get("pid");

  soloOfertasMode = offer === "1";
  if(cat) currentCategory = norm(cat);
  if(sub) currentSub = sub;
  if(pid) pendingPid = pid;
}

/* ================== SHEETS FETCH ================== */
function gvizUrlByGid(gid){
  return `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&gid=${gid}`;
}
function gvizUrlBySheet(sheetName){
  return `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(sheetName)}`;
}
function parseGviz(text){
  const json = JSON.parse(text.substring(47, text.length - 2));
  const cols = json.table.cols.map(c => c && c.label ? norm(c.label) : "col");
  const rows = json.table.rows.map(r=>{
    let obj = {};
    r.c.forEach((c,i)=> obj[cols[i]] = c ? (c.v===null ? "" : c.v) : "");
    return obj;
  });
  return { cols, rows };
}
async function fetchConfigSheets(){
  try{
    const t = await (await fetch(gvizUrlByGid(CONFIG_GID))).text();
    const { rows } = parseGviz(t);
    const names = rows.map(r => r.sheet ?? r.col ?? "").map(s=> (s??"").toString().trim()).filter(Boolean);
    const clean = names.filter(n => norm(n) !== "sheet");
    return clean.length ? clean : BACKUP_SHEETS;
  }catch(e){
    console.warn("Config fall√≥, usando respaldo", e);
    return BACKUP_SHEETS;
  }
}
async function fetchTab(sheetName){
  try{
    const t = await (await fetch(gvizUrlBySheet(sheetName))).text();
    const { rows } = parseGviz(t);
    return rows.map(o=>{
      const obj = { ...o };
      obj._sheet = norm(sheetName);
      obj.categoria = norm(obj.categoria || sheetName);
      obj.subcategoria = (obj.subcategoria ?? "").toString().trim();
      obj.nombre = (obj.nombre ?? "").toString().trim();
      obj.descripcion = (obj.descripcion ?? obj.descipcion ?? "").toString();
      obj.estado = norm(obj.estado || "activo");
      obj.stock = Number(obj.stock || 0);
      obj.precio = Number(obj.precio || 0);
      obj.precio_anterior = Number(obj.precio_anterior || 0);
      obj.unidad = (obj.unidad ?? "").toString().trim() || "unidad";
      obj.id = (obj.id ?? "").toString().trim();
      obj.solo_ofertas = norm(obj.solo_ofertas || "");
      obj._isOffer = (obj._sheet === "ofertas") || ["si","s√≠","1","true","yes"].includes(obj.solo_ofertas);
      // auto-fix github blob
      if(obj.imagen && obj.imagen.includes("github.com") && obj.imagen.includes("/blob/")){
        obj.imagen = obj.imagen.replace("github.com","raw.githubusercontent.com").replace("/blob/","/");
      }
      return obj;
    }).filter(p => p.nombre);
  }catch(e){
    console.warn("Tab fall√≥:", sheetName, e);
    return [];
  }
}
async function loadAll(){
  loadFromUrl();
  const sheetNames = await fetchConfigSheets();
  const results = await Promise.all(sheetNames.map(n => fetchTab(n)));
  products = results.flat().filter(p => p.estado !== "inactivo" && p.estado !== "0");
  document.getElementById("loader").style.display = "none";
  initCategoryBar();
  updateSubs();
  render();
  await loadTestimonials(); // ‚úÖ testimonios desde Sheets
  if(pendingPid) focusProductById(pendingPid);
}

/* ================== CATEGORY UI ================== */
function initCategoryBar(){
  const bar = document.getElementById("categoryBar");
  bar.innerHTML = "";

  // SOLO OFERTAS toggle chip (no depende de categoria)
  const offerChip = document.createElement("div");
  offerChip.className = "chip" + (soloOfertasMode ? " active promo-active" : "");
  offerChip.textContent = "üí• SOLO OFERTAS";
  offerChip.onclick = ()=>{
    soloOfertasMode = !soloOfertasMode;
    updateUrl();
    initCategoryBar();
    updateSubs();
    render();
  };
  bar.appendChild(offerChip);

  // categor√≠as reales
  const availableCats = [...new Set(products.map(p => p.categoria).filter(Boolean))];
  const preferredOrder = ["gamer","pc","movil","streaming","cobertores","power"];
  const ordered = [
    ...preferredOrder.filter(c => availableCats.includes(c)),
    ...availableCats.filter(c => !preferredOrder.includes(c))
  ];

  ordered.forEach(cat=>{
    const btn = document.createElement("div");
    btn.className = "chip" + (cat === currentCategory ? " active" : "");
    btn.innerHTML = `${getIconForCategory(cat)} ${cat}`;
    btn.onclick = ()=>{
      currentCategory = cat;
      currentSub = "";
      pendingPid = "";
      updateUrl();
      document.querySelectorAll(".category-bar .chip").forEach(c=>c.classList.remove("active"));
      btn.classList.add("active");
      updateSubs();
      render();
      window.scrollTo({top:0, behavior:"smooth"});
    };
    bar.appendChild(btn);
  });
}
function updateSubs(){
  const bar = document.getElementById("subBar");
  bar.innerHTML = "";

  if(!currentCategory){
    bar.style.display = "none";
    return;
  }

  const base = products.filter(p => p.categoria === currentCategory);
  const inMode = base.filter(p => soloOfertasMode ? p._isOffer : !p._isOffer);
  const subs = [...new Set(inMode.map(p => (p.subcategoria||"").trim()).filter(Boolean))];

  if(!subs.length){
    bar.style.display = "none";
    return;
  }
  bar.style.display = "flex";

  const allBtn = document.createElement("div");
  allBtn.className = "chip" + (!currentSub ? " active" : "");
  allBtn.textContent = "Todo";
  allBtn.onclick = ()=>{
    currentSub = "";
    pendingPid = "";
    updateUrl();
    render();
    setActiveSub(allBtn);
  };
  bar.appendChild(allBtn);

  subs.forEach(s=>{
    const b = document.createElement("div");
    b.className = "chip" + (currentSub===s ? " active" : "");
    b.textContent = s;
    b.onclick = ()=>{
      currentSub = s;
      pendingPid = "";
      updateUrl();
      render();
      setActiveSub(b);
    };
    bar.appendChild(b);
  });
}
function setActiveSub(btn){
  document.querySelectorAll(".sub-bar .chip").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

/* ================== PROMOS ================== */
function extractPromos(p){
  // Busca promo1_cant / promo1_precio ... promo99_*
  const promos = [];
  for(const k in p){
    const m = k.match(/^promo(\d+)_cant$/i);
    if(m){
      const idx = m[1];
      const cant = Number(p[k] || 0);
      const precio = Number(p[`promo${idx}_precio`] || 0);
      if(cant > 0 && precio > 0){
        promos.push({ cant, precio });
      }
    }
  }
  promos.sort((a,b)=>a.cant-b.cant);
  // elimina duplicados por cant (mant√©n el menor precio)
  const map = new Map();
  promos.forEach(x=>{
    if(!map.has(x.cant)) map.set(x.cant, x.precio);
    else map.set(x.cant, Math.min(map.get(x.cant), x.precio));
  });
  return [...map.entries()].map(([cant,precio])=>({cant,precio})).sort((a,b)=>a.cant-b.cant);
}
function priceForQty(p, qty){
  const base = Number(p.precio || 0);
  const promos = extractPromos(p);
  let unit = base;
  let tier = { cant: 1, precio: base };
  promos.forEach(pr=>{
    if(qty >= pr.cant){
      unit = pr.precio;
      tier = { cant: pr.cant, precio: pr.precio };
    }
  });
  return { unitPrice: unit, tier, promos };
}

/* ================== RENDER ================== */
function buildStatus(count){
  const row = document.getElementById("statusRow");
  if(!currentCategory && !document.getElementById("searchInput").value.trim()){
    row.style.display = "none";
    row.innerHTML = "";
    return;
  }
  row.style.display = "flex";
  row.innerHTML = `
    <div class="status-pill">Mostrando: <strong>${count}</strong></div>
    <div class="status-pill">Categor√≠a: <strong>${currentCategory ? currentCategory.toUpperCase() : "TODAS"}</strong></div>
    ${soloOfertasMode ? `<div class="status-pill">Solo ofertas ‚úÖ</div>` : ``}
  `;
}

function render(){
  const grid = document.getElementById("productGrid");
  grid.innerHTML = "";

  const q = norm(document.getElementById("searchInput").value);

  // ‚úÖ si no hay categor√≠a pero s√≠ hay b√∫squeda, buscamos en todo
  let list = products.slice();
  if(currentCategory) list = list.filter(p => p.categoria === currentCategory);
  if(currentSub) list = list.filter(p => (p.subcategoria||"").trim() === currentSub);
  list = list.filter(p => soloOfertasMode ? p._isOffer : !p._isOffer);

  if(q){
    list = list.filter(p=>{
      return norm(p.nombre).includes(q) || norm(p.descripcion).includes(q) || norm(p.subcategoria).includes(q);
    });
  }

  buildStatus(list.length);

  if(!currentCategory && !q){
    grid.innerHTML = `
      <div class="welcome-state">
        <div class="welcome-icon"><i class="fa-solid fa-hand-pointer"></i></div>
        <h3 class="welcome-title">¬°Empieza tu b√∫squeda!</h3>
        <p class="welcome-text">Selecciona una categor√≠a arriba o escribe en el buscador para ver resultados.</p>
      </div>`;
    return;
  }

  if(list.length === 0){
    grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:40px;color:var(--text-muted)">
      <i class="fa-solid fa-ghost" style="font-size:40px;margin-bottom:10px;"></i>
      <p style="font-weight:900;letter-spacing:1px;">NO HAY RESULTADOS</p>
    </div>`;
    return;
  }

  list.forEach(p=>{
    const isAgotado = Number(p.stock || 0) <= 0;
    const hasVideo = p.tiktok || p.youtube;
    const promos = extractPromos(p);
    const isPromoCard = p._isOffer && promos.length;

    const card = document.createElement("div");
    card.className = `card ${isAgotado ? "agotado" : ""} ${isPromoCard && !isAgotado ? "promo-mode" : ""}`;
    card.dataset.pid = p.id || "";

    const imgUrl = p.imagen || "";
    const ribbon = isAgotado ? `<div class="ribbon">AGOTADO</div>` : (isPromoCard ? `<div class="ribbon-promo">üî• HOT SALE</div>` : ``);

    let videoBadge = "";
    if(p.tiktok) videoBadge = `<a href="${p.tiktok}" target="_blank" class="video-badge tiktok"><i class="fa-brands fa-tiktok"></i> VER VIDEO</a>`;
    else if(p.youtube) videoBadge = `<a href="${p.youtube}" target="_blank" class="video-badge youtube"><i class="fa-brands fa-youtube"></i> VER VIDEO</a>`;

    let galleryBtn = "";
    if(p.galeria) galleryBtn = `<a href="${p.galeria}" target="_blank" class="btn-gallery"><i class="fa-regular fa-images"></i> Ver M√°s Fotos</a>`;

    // Descripci√≥n ‚Äúbonita‚Äù
    let rawDesc = (p.descripcion || "");
    let descText = rawDesc.replace(/(\r\n|\n|\r)/gm," ").replace(/([‚ñ∫‚Ä¢\-‚òÖ])/g,"\n$1").trim();

    // Precio normal
    const showOld = Number(p.precio_anterior||0) > Number(p.precio||0) && !isPromoCard;
    const priceHTML = `
      <div class="price-bar">
        <i class="fa-solid fa-tag price-icon"></i>
        <div class="price-stack">
          ${showOld ? `<div class="old-price-row"><span style="font-weight:900;">Antes:</span><span class="old-val">Lps. ${money(p.precio_anterior)}</span></div>` : ``}
          <div class="current-price-row">Lps. ${money(p.precio||0)}</div>
        </div>
      </div>`;

    // WhatsApp normal
    const normalMsg = p.whatsapp && p.whatsapp.toString().trim().length > 5
      ? p.whatsapp
      : `Hola SDC, me interesa: *${p.nombre}*\nPrecio: Lps. ${money(p.precio||0)}\nQuedo atento(a). Gracias.`;

    const normalLink = `https://wa.me/${MY_PHONE}?text=${encodeURIComponent(normalMsg)}`;

    // Promo UI (solo en ofertas con promos)
    let promoHTML = "";
    let waLink = normalLink;
    let btnText = isAgotado ? "CONSULTAR" : "PEDIR AHORA üöÄ";

    if(isPromoCard){
      // qty default: 1 (o 2 si existe promo 2+ y hay stock)
      let defaultQty = 1;
      const stock = Number(p.stock||0);
      if(promos.some(x=>x.cant===2) && stock >= 2) defaultQty = 2;

      // construir UI con dataset
      promoHTML = `
        <div class="promo-box" data-pid="${p.id}" data-qty="${defaultQty}">
          <div class="promo-top">
            <div class="promo-total"><i class="fa-solid fa-tag"></i> <span class="promoTotal">Lps. 0</span></div>
            <div class="promo-sub"><span class="promoLine">-</span></div>
          </div>

          <div class="qty-row">
            <button class="qty-btn minus">‚àí</button>
            <div class="qty-pill"><span class="qtyVal">${defaultQty}</span> <span class="qtyUnit">UNIDADES</span></div>
            <button class="qty-btn plus">+</button>
          </div>

          <div class="tier-grid"></div>
          <div class="hint">El total y WhatsApp se actualizan solos ‚úÖ</div>

          <a href="#" target="_blank" class="btn-ws promoBtn"><i class="fa-brands fa-whatsapp"></i> PEDIR</a>
        </div>`;

      btnText = "PEDIR";
    }

    card.innerHTML = `
      <div class="card-img-container">
        <div class="card-img" style="background-image:url('${imgUrl}')"></div>
        ${ribbon}
        ${videoBadge}
      </div>
      <div class="card-body">
        <h3>${p.nombre}</h3>
        <div class="desc">${descText}</div>
        ${galleryBtn}
        ${isPromoCard ? promoHTML : priceHTML}
        ${!isPromoCard ? `<a href="${normalLink}" target="_blank" class="btn-ws" style="${isAgotado ? 'background:#333; color:#aaa; box-shadow:none;' : ''}">
          <i class="fa-brands fa-whatsapp"></i> ${btnText}
        </a>` : ``}
      </div>
    `;
    grid.appendChild(card);

    // Activar promo UI despu√©s de insertar
    if(isPromoCard) initPromoWidget(card, p);
  });

  // marcar chip activo seg√∫n categor√≠a actual
  document.querySelectorAll(".category-bar .chip").forEach(ch=>{
    if(norm(ch.textContent).includes(currentCategory) && currentCategory) ch.classList.add("active");
  });
}

function initPromoWidget(card, p){
  const box = card.querySelector(".promo-box");
  if(!box) return;

  let qty = Number(box.dataset.qty || 1);
  const stock = Number(p.stock || 0);
  const unidad = p.unidad || "unidad";
  const promos = extractPromos(p);

  // tiers a mostrar: 1,2,3,4 y los promo_cant (sin repetir)
  const tierSet = new Set([1,2,3,4]);
  promos.forEach(x=>tierSet.add(x.cant));
  const tiers = [...tierSet].sort((a,b)=>a-b);

  const tierGrid = box.querySelector(".tier-grid");
  tierGrid.innerHTML = "";

  tiers.forEach(cant=>{
    const { unitPrice } = priceForQty(p, cant);
    const t = document.createElement("div");
    t.className = "tier";
    t.dataset.cant = cant;

    const label = cant >= 5 ? `${cant}+` : `${cant}`;
    t.innerHTML = `<span>${label}</span> <span style="opacity:.8;">Lps.${money(unitPrice)}</span>`;

    const disabled = stock > 0 && cant > stock;
    if(disabled) t.classList.add("disabled");

    t.onclick = ()=>{
      if(disabled){
        toast(`Solo hay ${stock} disponibles`);
        return;
      }
      qty = cant;
      updatePromoUI();
    };
    tierGrid.appendChild(t);
  });

  const minus = box.querySelector(".minus");
  const plus = box.querySelector(".plus");

  minus.onclick = ()=>{
    qty = Math.max(1, qty - 1);
    updatePromoUI();
  };
  plus.onclick = ()=>{
    if(stock > 0 && qty >= stock){
      toast(`Solo hay ${stock} disponibles`);
      qty = stock;
      updatePromoUI();
      return;
    }
    qty = qty + 1;
    updatePromoUI();
  };

  function updatePromoUI(){
    // clamp por stock
    if(stock > 0 && qty > stock){
      qty = stock;
      toast(`Solo hay ${stock} disponibles`);
    }

    const { unitPrice, tier } = priceForQty(p, qty);
    const total = unitPrice * qty;

    box.querySelector(".promoTotal").textContent = `Lps. ${money(total)}`;
    const unitLabel = pluralize(unidad, qty).toUpperCase();
    box.querySelector(".promoLine").textContent = `${qty} ${unitLabel} x Lps. ${money(unitPrice)} c/u`;
    box.querySelector(".qtyVal").textContent = qty;
    box.querySelector(".qtyUnit").textContent = unitLabel;

    // activar tier
    box.querySelectorAll(".tier").forEach(el=>{
      el.classList.remove("active");
      const c = Number(el.dataset.cant||0);
      const isDisabled = el.classList.contains("disabled");
      if(isDisabled) return;
      // tier activo: el que define el precio actual (√∫ltimo umbral)
      if(c === tier.cant) el.classList.add("active");
    });

    // botones +/-
    minus.classList.toggle("disabled", qty <= 1);
    plus.classList.toggle("disabled", stock > 0 && qty >= stock);

    // WhatsApp msg
    const unitStr = pluralize(unidad, qty);
    const tierLabel = tier.cant > 1 ? `Promo ${tier.cant}+` : `Precio normal`;
    const msg = `Hola SDC, quiero *${qty} ${unitStr}* de:\n*${p.nombre}*\n\n${tierLabel}\nPrecio unitario: Lps. ${money(unitPrice)}\nTotal: Lps. ${money(total)}\nStock disponible: ${stock}\n\nQuedo atento(a). Gracias.`;
    const link = `https://wa.me/${MY_PHONE}?text=${encodeURIComponent(msg)}`;

    const btn = box.querySelector(".promoBtn");
    btn.href = link;
    btn.innerHTML = `<i class="fa-brands fa-whatsapp"></i> PEDIR ${qty} ${unitStr.toUpperCase()} üöÄ`;
    btn.style.background = (stock > 0 && qty > 0) ? "" : "#333";
  }

  updatePromoUI();
}

/* ================== TESTIMONIOS FROM SHEETS ================== */
async function loadTestimonials(){
  try{
    const t = await (await fetch(gvizUrlBySheet(TESTIMONIOS_SHEET))).text();
    const { rows } = parseGviz(t);
    const clean = rows.map(r=>{
      const nombre = (r.nombre ?? "").toString().trim();
      const rol = (r.rol ?? r.tipo ?? "").toString().trim();
      const estrellas = Math.max(1, Math.min(5, Number(r.estrellas || 5)));
      const comentario = (r.comentario ?? r.texto ?? r.opinion ?? "").toString().trim();
      const estado = norm(r.estado || "activo");
      return { nombre, rol, estrellas, comentario, estado };
    }).filter(x=>x.nombre && x.comentario && x.estado !== "inactivo");

    const list = clean.slice(0,8);
    if(!list.length) throw new Error("sin testimonios activos");

    renderTestimonials(list);
  }catch(e){
    console.warn("Testimonios no cargaron, fallback:", e);
    renderTestimonials([
      {nombre:"Cliente SDC",rol:"Cliente",estrellas:5,comentario:"Buena atenci√≥n y productos de calidad. Recomendado.",estado:"activo"},
      {nombre:"Gamer Comayagua",rol:"Gamer",estrellas:5,comentario:"Las promos por cantidad est√°n brutales. R√°pido y confiable.",estado:"activo"},
      {nombre:"Cliente Verificado",rol:"Cliente",estrellas:5,comentario:"El env√≠o lleg√≥ bien y el producto sellado. Excelente.",estado:"activo"},
    ]);
  }
}
function initials(name){
  const parts = (name||"").trim().split(/\s+/).slice(0,2);
  return parts.map(p=>p[0]?.toUpperCase()||"").join("") || "SD";
}
function renderTestimonials(list){
  const section = document.getElementById("testimonialsSection");
  const track = document.getElementById("testimonialsTrack");
  track.innerHTML = "";

  list.forEach(t=>{
    const card = document.createElement("div");
    card.className = "t-card";
    const stars = Array.from({length:t.estrellas}).map(()=>`<i class="fa-solid fa-star"></i>`).join("");
    card.innerHTML = `
      <div class="t-header">
        <div class="t-avatar">${initials(t.nombre)}</div>
        <div class="t-info">
          <h4>${t.nombre}</h4>
          <span>${t.rol || "Cliente"}</span>
        </div>
      </div>
      <div class="t-stars">${stars}</div>
      <p class="t-text">"${t.comentario}"</p>
    `;
    track.appendChild(card);
  });

  section.style.display = "block";
}

/* ================== UI EVENTS ================== */
document.getElementById("searchInput").addEventListener("input", ()=>{
  pendingPid = "";
  updateUrl();
  render();
});

window.addEventListener("scroll", ()=>{
  const f = document.getElementById("filtersWrapper");
  window.scrollY > 50 ? f.classList.add("scrolled") : f.classList.remove("scrolled");
});

function toggleFaq(element){
  element.parentElement.classList.toggle("open");
}

const toggle = document.getElementById("themeToggle");
let dark = false;
document.documentElement.setAttribute("data-theme","light");
toggle.onclick = ()=>{
  dark = !dark;
  document.documentElement.setAttribute("data-theme", dark ? "dark" : "light");
  toggle.innerHTML = dark ? '<i class="fa-solid fa-moon"></i>' : '<i class="fa-solid fa-sun"></i>';
};

document.getElementById("goHome").onclick = ()=>{
  currentCategory = "";
  currentSub = "";
  soloOfertasMode = false;
  pendingPid = "";
  updateUrl();
  initCategoryBar();
  updateSubs();
  render();
  window.scrollTo({top:0, behavior:"smooth"});
};

document.getElementById("loadMapBtn").onclick = ()=>{
  const shell = document.getElementById("mapShell");
  shell.innerHTML = `
    <iframe class="map-frame" style="width:100%;height:250px;border:0;"
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1933.2843779837946!2d-87.6289189153322!3d14.454458000000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f6585356521890d%3A0x5e9e0d326671793d!2sInkmortal%20Tattoo%20Comayagua!5e0!3m2!1ses!2shn!4v1709660000000!5m2!1ses!2shn"
      loading="lazy" referrerpolicy="no-referrer-when-downgrade" allowfullscreen=""></iframe>
  `;
};

function focusProductById(pid){
  const el = document.querySelector(`[data-pid="${CSS.escape(pid)}"]`);
  if(!el) return;
  el.classList.add("highlight");
  el.scrollIntoView({behavior:"smooth", block:"center"});
  setTimeout(()=>el.classList.remove("highlight"), 1800);
}

/* ================== START ================== */
loadAll();
</script>
</body>
</html>