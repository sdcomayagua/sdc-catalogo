<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Soluciones Digitales Comayagua</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#050b14;
  color:#fff;
}

/* HEADER */
header{
  padding:40px 20px;
  text-align:center;
  background:linear-gradient(135deg,#001a33,#00ffe1);
}
header h1{
  margin:0;
  color:#00ffe1;
}
header p{
  opacity:.9;
}

/* MENU */
nav{
  display:flex;
  justify-content:center;
  gap:10px;
  padding:15px;
  background:#020611;
}
nav button{
  background:#0b1a2f;
  color:#00ffe1;
  border:1px solid #00ffe1;
  padding:10px 20px;
  cursor:pointer;
  border-radius:20px;
}
nav button.active{
  background:#00ffe1;
  color:#000;
}

/* SEARCH */
.search{
  text-align:center;
  padding:20px;
}
.search input{
  width:90%;
  max-width:400px;
  padding:12px;
  border-radius:20px;
  border:none;
}

/* GRID */
.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  background:#0b1220;
  border-radius:15px;
  padding:15px;
  box-shadow:0 0 15px #000;
}
.card img{
  width:100%;
  border-radius:10px;
}
.card h3{
  color:#00ffe1;
}
.price{
  color:#00ff6a;
  font-size:20px;
}
.stock{
  font-size:14px;
  opacity:.8;
}
.card button{
  margin-top:10px;
  width:100%;
  padding:12px;
  border:none;
  background:#00ffe1;
  color:#000;
  font-weight:bold;
  border-radius:10px;
  cursor:pointer;
}

/* FOOTER */
footer{
  text-align:center;
  padding:20px;
  opacity:.6;
}
</style>
</head>

<body>

<header>
  <h1>Soluciones Digitales Comayagua</h1>
  <p>Catálogo Gamer · Móvil · Streaming</p>
</header>

<nav>
  <button class="active" onclick="setCategory('todos',this)">TODOS</button>
  <button onclick="setCategory('gamer',this)">GAMER</button>
  <button onclick="setCategory('movil',this)">MÓVIL</button>
  <button onclick="setCategory('stream',this)">STREAM</button>
</nav>

<div class="search">
  <input type="text" id="search" placeholder="Buscar producto...">
</div>

<div class="products" id="products"></div>

<footer>
  © 2026 Soluciones Digitales Comayagua
</footer>

<script>
const SHEET_URL = "https://docs.google.com/spreadsheets/d/1J-y47gPZuuyQOxaj9OJa4tMzR2IjfQVAzCR1i928dng/gviz/tq?tqx=out:json";
const WHATSAPP_NUMBER = "50432429490";

let allProducts = [];
let currentCategory = "todos";

fetch(SHEET_URL)
.then(res => res.text())
.then(text => {
  const json = JSON.parse(text.substring(47).slice(0,-2));
  allProducts = json.table.rows.map(r => ({
    categoria: r.c[0]?.v?.toLowerCase() || "",
    nombre: r.c[1]?.v || "",
    precio: r.c[2]?.v || "",
    stock: r.c[3]?.v || "",
    imagen: r.c[4]?.v || "",
    estado: r.c[5]?.v || "",
    destacado: r.c[6]?.v || "",
    whatsapp: r.c[7]?.v || ""
  }));
  render();
});

function setCategory(cat,btn){
  currentCategory = cat;
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  render();
}

document.getElementById("search").addEventListener("input",render);

function render(){
  const q = document.getElementById("search").value.toLowerCase();
  const container = document.getElementById("products");
  container.innerHTML = "";

  allProducts
  .filter(p =>
    (currentCategory==="todos" || p.categoria===currentCategory) &&
    p.nombre.toLowerCase().includes(q)
  )
  .forEach(p=>{
    const msg = encodeURIComponent(p.whatsapp);
    const link = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;

    container.innerHTML += `
      <div class="card">
        <img src="${p.imagen}" alt="">
        <h3>${p.nombre}</h3>
        <div class="price">Lps. ${p.precio}</div>
        <div class="stock">Stock: ${p.stock}</div>
        <button onclick="window.open('${link}','_blank')">
          PEDIR POR WHATSAPP
        </button>
      </div>
    `;
  });
}
</script>

</body>
</html>
